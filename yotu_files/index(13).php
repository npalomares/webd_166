YUI.add("nfl-video-events",function(Y){Y.namespace("NFL.Video").PlayerEvent={FORMAT_LOADED:"formatloaded",CONFIG_LOADED:"videoplayer:configloaded",PLAY_NEXT:"mediaplayer:playNext",CLOSE:"closeButton:close",INITIALIZED:"videoplayer:initialized",IMAGE_LOADED:"imageLoaded",AVAILABLE:"videoplayer:readyToLoad",READY_TO_PLAY:"videoplayer:waitingToPlay",UNAVAILABLE:"videoplayer:unavailable",AD_START:"videoplayer:adPlaying",AD_COMPLETE:"videoplayer:adComplete",AD_REQUESTED:"videoplayer:adRequested",AD_LOADED:"videoplayer:adLoaded",AD_ERROR:"videoplayer:adError",PRE_ROLL_START:"mediaplayer:preRollStart",PRE_ROLL_COMPLETE:"mediaplayer:preRollComplete",NO_PRE_ROLL:"mediaplayer:noPreRoll",PLAY:"videoplayer:play",PAUSE:"videoplayer:pause",POST_ROLL_START:"mediaplayer:postRollStart",PLAYBACK_COMPLETE:"flash:complete",SEEK:"videoplayer:seek",RESTART:"videoplayer:restart",ADD_TO_FAVORITES:"mediaplayer:addToFavorites",STREAM_LENGTH:"flash:streamlength",PLAYING_IN_HQ:"videoplayer:playingInHQ",PLAYING_IN_SQ:"videoplayer:playingInSQ",TEST_DATA:"videoplayer:testdata",FULLSCREEN:"videoplayer:fullscreen",VOLUME_CHANGE:"videoplayer:volumechange",typeUnprefixed:function(type){var aType=String(type).split(":");return aType.pop();}};},"3.5.0",{requires:[]});;YUI.add("nfl-video-base",function(Y){"use strict";var NFLVideo=Y.namespace("NFL.Video"),PlayerEvent=NFLVideo.PlayerEvent;NFLVideo.Base=Y.Base.create("nfl-video-plugin",Y.Plugin.Base,[],{initializer:function(){var host=this.get("host");this.addTarget(host);Y.Object.each(PlayerEvent,function(eventName){var config={emitFacade:true,queuable:true};if(eventName!==PlayerEvent.INITIALIZED&&eventName!==PlayerEvent.FORMAT_LOADED){Y.mix(config,{bubbles:true,broadcast:2});}
this.publish(eventName,config);},this);Y.later(50,host,"fire",PlayerEvent.FORMAT_LOADED);},play:function(){},pause:function(){},loadJSON:function(){},loadContentId:function(){},loadMidRollAd:function(){},seek:function(){}},{NS:"player",ATTRS:{}});},"3.5.0",{requires:["base-build","nfl-video-events","plugin"]});;YUI.add("nfl-video",function(Y){var PLAYER_VERSION="3.36",PLAYER_NAME="NFLVideoPlayer",BUILD=Y.config.win.nfl_ui_version||"unknown",NFLVideo=Y.namespace("NFL.Video"),PlayerEvent=NFLVideo.PlayerEvent,ySWFDetectIsFlashVersionAtLeast=Y.SWFDetect.isFlashVersionAtLeast,yLangIsFunction=Y.Lang.isFunction,yLangIsArray=Y.Lang.isArray,swfUpgradeMinVersion=Y.UA.ie?[10,1,0]:[6,0,65],swfMinVersion=Y.UA.ie?[10,1,0]:[10,0,0],supportsFlashUpgrade=ySWFDetectIsFlashVersionAtLeast.apply(null,swfUpgradeMinVersion),supportsFlashVideo=ySWFDetectIsFlashVersionAtLeast.apply(swfMinVersion),supportsHTML5=(function(){var elem=Y.config.doc.createElement('video'),bool=false;try{if(Y.Lang.isFunction(elem.canPlayType)){bool=elem.canPlayType('video/mp4; codecs="avc1.42E01E"');bool=bool&&bool!=="no";if(!Y.UA.mobile&&Y.UA.ie===9){bool=false;}}}catch(e){}
return bool;}()),Base=NFLVideo.Base,Player;(function(o){var m=o.userAgent.match(/Silk\/([\d\.]+)/),c=0;if(!m){return;}
o.silk=parseFloat(m[1].replace(/\./g,function(){return(c++===1)?'':'.';}));if(o.silk>=2&&o.android===2.34){o.android=4.03;}}(Y.UA));function blockMobileDevices(){var YUA=Y.UA,isMobile=YUA.ios||YUA.android,isTablet=YUA.ipad||YUA.android===3||YUA.silk;return isMobile&&!isTablet;}
Player=Y.Base.create("nfl-video",Y.Widget,[],{initializer:function(config){console.log(PLAYER_NAME+" version "+PLAYER_VERSION+" build "+BUILD+", playerType: "+this.get("playerType"));var self=this,deps=[],playerConfig=this.getAttrs(Y.Object.keys(Base.ATTRS));this.callQueue=[];this._playerInitialized=false;this._initConfig={};this.publish(PlayerEvent.INITIALIZED,{broadcast:2,bubbles:true,emitFacade:true,fireOnce:true});this.publish(PlayerEvent.FORMAT_LOADED,{fireOnce:true});if(config.ads&&config.ads.companion){this.companions={};this.companionSizes=[];Y.all(config.ads.companion).each(function(ad){var size=ad.get("offsetWidth")+"x"+ad.get("offsetHeight");this.companions["companion"+size]=ad;this.companionSizes.push(size);},this);config.ads.companionSize=this.companionSizes;this.on(PlayerEvent.AD_LOADED,this._onAdLoaded,this);}
switch(this.get("playerType")){case"html5":deps=["nfl-video-html5"];switch(config.ads&&config.ads.type){case"acudeo":deps.push("nfl-video-ads-acudeo");break;case"vast":deps.push("nfl-video-ads-vast");break;}
deps.push(function(){self.plug(NFLVideo.HTML5Player,playerConfig);self.player.once(PlayerEvent.INITIALIZED,function(){self._initTest({plugged:true});});});setTimeout(function(){Y.use.apply(Y,deps);},0);break;case"flash":Y.use("nfl-video-swf",function(){self.plug(NFLVideo.SWFPlayer,playerConfig);self.player.once(PlayerEvent.INITIALIZED,function(){self._initTest({plugged:true});});});break;case"upgrade":Y.use("swf-expressinstall",function(Y){var handle=Y.SWF.expressInstall(self.get("contentBox"));self.plug(Base);self.once("destroy",function(){Y.SWF.removeExpressInstall(handle);});self._initTest({plugged:true});});break;case"blocked":self.plug(Base);self._initTest({plugged:true});break;case"none":self.plug(Base);self._initTest({plugged:true});self.get("contentBox").setContent(Y.Lang.sub('<a href="http://get.adobe.com/flashplayer/" target="_blank" class="no-flash-installed"><img src="'+Y.config.groups.nflui.base+'nfl-video/assets/flash-required-768x432.png" width="100%" /></a>'));break;case"native":self.plug(Base);self._initTest({plugged:true});self.get("contentBox").setContent(Y.Lang.sub('<a href="http://sponsorship.verizonwireless.com/nfl/nfl-mobile/" data-clickname="video_verizon_download" target="_blank" class="mobile-video-blocked"><img src="http://i.nflcdn.com/static/site/4.0/img/video/mobile-required-768x432.png" width="640" /></a>'));break;}},renderUI:function(){this.get("boundingBox").setStyles({position:"relative",backgroundColor:this.get("bgcolor")});this.get("contentBox").setStyles({width:"100%",height:"100%",overflow:"hidden",position:"absolute"});},bindUI:function(){},_initTest:function(config){var cfg=this._initConfig,cq=this.callQueue;Y.mix(cfg,config,true);if(cfg.plugged&&cfg.rendered){this._playerInitialized=true;if(this.player&&cq.length){Y.Array.each(this.callQueue,function(queuedCall){var fn=this[queuedCall.fn];if(yLangIsFunction(fn)){fn.apply(this,queuedCall.args);}},this.player);}
this.fire(PlayerEvent.INITIALIZED);}},_proxyMethod:function(fn,args){var player=this.player,argArray=yLangIsArray(args)?args:[];if(this._playerInitialized&&player){player[fn].apply(player,argArray);}else if(!this._playerInitialized){this.callQueue.push({fn:fn,args:argArray});}
return this;},loadJSON:function(url,autoplay){if(this._jsonURL===url){console.warn("Attempt to re-load the current video");}
this._jsonURL=url;this._proxyMethod("loadJSON",[url,autoplay]);return this;},loadContentId:function(contentId,autoplay){this._proxyMethod("loadContentId",[contentId,autoplay]);return this;},play:function(){this._proxyMethod("play");return this;},pause:function(){this._proxyMethod("pause");return;},seek:function(seconds){this._proxyMethod("seek",[seconds]);return;},syncUI:function(){this._initTest({rendered:true});},_onAdLoaded:function(event){var memo=event.memo;Y.Object.each(this.companions,this._uiRenderCompanion,memo);},_uiRenderCompanion:function(div,size){var html=this[size],doc=Y.config.doc,contentWindow="contentWindow",documentS="document",iframe,page,iframeNode,domainSrc,d;if(!html){return;}
page='<!DOCTYPE html><html><head><meta charset="utf-8"><title></title></head><body style="margin:0;padding:0">'+html+'</body></html>';iframeNode=Y.Node.create("<iframe frameborder=\"0\" allowtransparency=\"true\" scrolling=\"no\" />");iframeNode.setStyles({width:"100%",height:"100%",verticalAlign:"bottom"});div.setContent(iframeNode);iframe=iframeNode.getDOMNode();try{iframe[contentWindow][documentS].open();}catch(e){domainSrc="javascript:var d="+documentS+".open();d.domain='"+doc.domain+"';";iframe.src=domainSrc+"void(0);";}
try{d=iframe[contentWindow][documentS];d.write('<!DOCTYPE html><html><head><meta charset="utf-8"><title></title></head><body style="margin:0;padding:0">'+html+'</body></html>');d.close();}catch(e2){iframe.src=domainSrc+'d.write("'+html.replace(/"/g,'\\"')+'");d.close();';}}},{PlayerName:PLAYER_NAME,Version:PLAYER_VERSION,Build:BUILD,ATTRS:{ads:{value:{}},bgcolor:{value:"#000000",validator:function(value){return(/^#[A-F\d]{6}/).test(value);},writeOnce:true},playerName:{value:"NFL.Video.Player",writeOnce:true},playerType:{getter:function(forcedType){return forcedType||(Y.UA.silk?"html5":supportsFlashVideo?"flash":supportsHTML5?"html5":supportsFlashUpgrade?"upgrade":"none");}},configURL:{value:"../json/config.json"},contentId:{value:""},channelId:{value:""},debugMode:{value:false,writeOnce:true},autoplay:{value:false,writeOnce:true},related:{value:"",writeOnce:true},showBranding:{value:false,writeOnce:true},contentURL:{value:""},relatedValue:{value:"",writeOnce:true},continuous:{value:false},chromeless:{value:false,writeOnce:true},isContinousManual:{value:false,writeOnce:true},nextVideo:{value:{}}}});Y.mix(NFLVideo,{VideoAdSetting:{NONE:0,PRE_ROLL:1,POST_ROLL:2,OMIT_FIRST:32,ALWAYS_FIRST:64},Player:Player,isUABlocked:blockMobileDevices,supportsHTML5:supportsHTML5,supportsFlashVideo:supportsFlashVideo});},"3.4.1",{requires:["base-build","event-custom-complex","nfl-video-events","nfl-video-base","swfdetect","widget-base"]});